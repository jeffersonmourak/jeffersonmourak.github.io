<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pegando Informações de Eventos com Node.JS</title>
    <link href='https://fonts.googleapis.com/css?family=Muli:400,300|Slabo+27px' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/libs.css">
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css">
    <style>
    header {
        background-image: url('http://aceleratech.com.br/wp-content/uploads/2013/10/eventick1.png');
    }
    </style>
</head>

<body>
    <header id="mainHeader">
        <h1>Pegando Informações de Eventos com Node.JS</h1>
    </header>
    <div class="grid">
        <section class="first-element about col-1-3">
            <aside>
                <h1>About Me</h1>
                <br>
                <h2>Jefferson Moura</h2>
                <h3>Front-end Developer</h3>
                <br>
                <ul>
                    <li><a target="_blank" href="https://www.facebook.com/jeffersonmouraamador"><i class="fa fa-facebook-official"></i> Facebook</a></li>
                    <li><a target="_blank" href="https://plus.google.com/+JeffersonMourak"><i class="fa fa-google-plus-square"></i> Google+</a></li>
                    <li><a target="_blank" href="https://github.com/jeffersonmourak/"><i class="fa fa-github-square"></i> GitHub</a></li>
                </ul>
            </aside>
        </section>
        <section class="first-element articles col-2-3">
            <article>
                <div class="content">
                    <div class="text">
                        <p>A algum tempo, a galera do <a href="https://www.eventick.com.br/">Eventick</a> lançou a sua <a href="http://desenvolvedor.eventick.com.br/docs">API</a> pública,
Na qual inclui várias funções massas, Então enquanto lia a documentação, vi que não existia nenhum código para Node.JS, então, Botei a preguiça de lado e começei a programar...
Bem, no fim eu acabei criando, o <strong>node-eventick</strong>, ele abstrai todas as requisições da api, para você se preocupar com apenas uma coisa. Programar.
Então vamos ao código...</p>

<h2 id="adicionandoaoprojeto">Adicionando ao projeto.</h2>

<p>Para adicionar ao seu projeto é bem simples.</p>

<p>Instale.</p>

<pre><code>    $ npm install --save node-eventick
</code></pre>

<p>e adicione</p>

<pre><code>    var Eventick = require('node-eventick');
</code></pre>

<h2 id="autenticando">Autenticando</h2>

<p>A autenticação vai precisar do seu email e senha que são usados para se logar no eventick</p>

<pre><code>    var eventick = new Eventick('email@email.com','senha');
</code></pre>

<h2 id="eventos">Eventos</h2>

<p>Para poder acessar os dados dos eventos da sua conta, dentro da class Eventick já contem um método que te ajuda a fazer essas requisições.</p>

<pre><code>    var evento = eventick.events;
</code></pre>

<h3 id="listando">Listando</h3>

<p>A listagem dos seus eventos é uma função de <strong>events</strong> que te retorna uma array com todas as informaões de todos os seus eventos.</p>

<pre><code>    var eventos = evento.list();
</code></pre>

<p>o seu retorno vai ser parecido com esse.</p>

<pre><code>    [ 
        { 
            id: 20533,
            title: 'API EVENT TEST',
            venue: null,
            slug: 'api-event-test',
            start_at: '2015-11-30 20:44:00 -0200',
            theme_color: '00acc1',
            thumbnail_url: null,
            links: {
            tickets: [
                        {
                            id: 47848,
                            name: "Ticket Name"
                        }
                     ]
          } 
        } 
    ]
</code></pre>

<p>caso você queira a informação de apenas um evento, você pode usar o <strong>get</strong>, que é uma função de <strong>events</strong> também, ela pede como parâmetro o id do seu evento, e como retorno vai te entregar um objeto</p>

<pre><code>    var eventoX = evento.get(id_do_evento);
</code></pre>

<p><strong>retorno:</strong></p>

<pre><code>    { 
        id: 20533,
        title: 'API EVENT TEST',
        venue: null,
        slug: 'api-event-test',
        start_at: '2015-11-30 20:44:00 -0200',
        theme_color: '00acc1',
        thumbnail_url: null,
        attendees: class,
        links: {
        tickets: [
                    {
                        id: 47848,
                        name: "Ticket Name"
                    }
                 ]
        } 
    }
</code></pre>

<h2 id="participantes">Participantes</h2>

<p>Os participantes eu pensei em dois métodos de poder pegar esses dados, vou mostrar para vocês os dois métodos.</p>

<h3 id="metdo1apartirdoevento">Metódo 1 - A partir do evento.</h3>

<p>Caso você esteja trabalhando com um evento, e já tenha uma variável contendo os dados do evento no seu escopo, você pode a partir dela resgatar os dados dos participantes, usando o método <strong>attendees</strong>.</p>

<p>Em <strong>attendees</strong> você tem três métodos, <strong>list</strong>, <strong>get</strong>, e outro que vou falar mais a frente.</p>

<pre><code>    var participantes = eventoX.attendees.list();
</code></pre>

<p>Na listagem a função irá retornar uma array como essa.</p>

<pre><code>    [
        {
            "id": 869946,
            "name": "user1",
            "email": "user1@domain.com",
            "code": "DDFHN9ZR",
            "ticket_type": "default",
            "checked_at": null
        },
        {
            "id": 869717,
            "name": "user2",
            "email": "user2@domain.com",
            "code": "YERCYS8B",
            "ticket_type": "default",
            "checked_at": "2015-10-14 23:11:59 -0300"
        },
        {
            "id": 869765,
            "name": "user3",
            "email": "user3@domain.com",
            "code": "PGADPKG9",
            "ticket_type": "default",
            "checked_at": null
        }
    ]
</code></pre>

<p>caso você queira a informação de um usuário, você pode usar o método <strong>get</strong></p>

<pre><code>    var participanteX = eventoX.attendees.get(userID);
</code></pre>

<p>ele irá retornar um objeto com as informações desse usuário</p>

<pre><code>    {
        "id": 869765,
        "name": "user3",
        "email": "user3@domain.com",
        "code": "PGADPKG9",
        "ticket_type": "default",
        "checked_at": null
    }
</code></pre>

<h3 id="metdo2funodeparticipantesstandalone">Metódo 2 - Função de participantes Stand-Alone.</h3>

<p>Uma coisa que pode acontecer é de você já ter as informações de um evento e querer apenas os dados dos participantes, então pensando nisso eu criei uma função Stand-alone somente para o resgate desses dados.
Ela é semelhante a do item anterior, porem você não precisa entrar no evento, a única diferença é que você precisa passar como parâmetro o id do evento</p>

<pre><code>    var participantes = eventick.attendees.list(id_do_evento);
</code></pre>

<p>E ele irá retornar a mesma array do Método 1.</p>

<pre><code>    [
        {
            "id": 869946,
            "name": "user1",
            "email": "user1@domain.com",
            "code": "DDFHN9ZR",
            "ticket_type": "default",
            "checked_at": null
        },
        {
            "id": 869717,
            "name": "user2",
            "email": "user2@domain.com",
            "code": "YERCYS8B",
            "ticket_type": "default",
            "checked_at": "2015-10-14 23:11:59 -0300"
        },
        {
            "id": 869765,
            "name": "user3",
            "email": "user3@domain.com",
            "code": "PGADPKG9",
            "ticket_type": "default",
            "checked_at": null
        }
    ]
</code></pre>

<p>Da mesma forma vai ser com a função <strong>get</strong></p>

<pre><code>    var participanteX = eventick.attendees.get(id_do_evento, userID);
</code></pre>

<p>e vai retornar o mesmo objeto.</p>

<pre><code>    {
        "id": 869765,
        "name": "user3",
        "email": "user3@domain.com",
        "code": "PGADPKG9",
        "ticket_type": "default",
        "checked_at": null
    }
</code></pre>

<h2 id="checkin">Checkin</h2>

<p>Pensando também no seu conforto, os caras do <strong>Eventick</strong> habilitaram a API à fazer o checkin dos seus participantes, então, no projeto não poderia faltar essa <em>Feature</em>.</p>

<p>Existem dois tipos de checkin, o <strong>unitário</strong> e o <strong>em massa</strong>, nos nomes estão bem óbvios o que cada um faz.
Pois bem, essas funções estão incluídas as classes <strong>attendees</strong> tanto do evento quanto na stand-alone, e o método é o mesmo.</p>

<h3 id="checkinunitrio">Checkin Unitário</h3>

<p>O checkin unitário é bem simples, quando você faz o get de um participante, dentro do objeto, vem uma função chamada <strong>checkin()</strong>, então, é só chamar ela</p>

<pre><code>    //dentro do evento.
    var participanteX = eventoX.attendees.get(userID);
    participanteX.checkin();

    //Stand-alone
    var participanteX = eventick.attendees.get(id_do_evento, userID);
    participanteX.checkin();
</code></pre>

<p>Caso você precise passar a data e hora em que o participante fez o checkin, então você pode passar como parâmetro uma <em>DateString</em>, com as informações da data, é importante que esses dados estejam no padrão <strong>ISO 8601</strong>, (YYYY-MM-DDTHH:MM:SS±hh:mm).</p>

<pre><code>    //dentro do evento.

    var hora = new Date(informacao_da_data).toISOString();
    var participanteX = eventoX.attendees.get(userID);
    participanteX.checkin(hora);

    //Stand-alone

    var hora = new Date(informacao_da_data).toISOString();
    var participanteX = eventick.attendees.get(id_do_evento, userID);
    participanteX.checkin(hora);
</code></pre>

<h3 id="checkin_emmassa_">Checkin <em>Em massa</em></h3>

<p>Outra maneira de fazer checkin, é passando eles como uma array, assim você pode fazer o checkin de vários usuário ao mesmo tempo.
para fazer isso você deve passar uma array de objetos, com os objetos contendo a seguinte informação.</p>

<pre><code>    [
        {
            id:id_do_participante,
            checked_at: date_string
        }
    ]
</code></pre>

<p>tendo essa array, você pode chamar as seguintes funções para fazer o checkin.</p>

<pre><code>    //dentro do evento.

    eventoX.attendees.check_all(array);

    //Stand-alone

    eventick.attendees.check_all(array);
</code></pre>

<p><em>This is all folks</em>, esse é uma apresentação do módulo, se vocês gostaram, deem um star lá no <a href="https://github.com/jeffersonmourak/node-eventick">GitHub</a>, ou um fork, vocês que sabem ::smile::</p>

<p>e por fim, obrigado por ler esse artigo, qualquer dúvida, deixe um comentário abaixo, estarei totalmente disposto a responder.</p>
                    </div>
                </div>
                <div class="author">
                    <strong>Author: </strong> Jefferson Moura
                </div>
                <br>
                <h2>Comentários:</h2>
                <div class="disqus">
                    <div id="disqus_thread"></div>
                </div>
                <script type="text/javascript">
                if (window.DISQUS) {
                    DISQUS.reset({
                        reload: true,
                        config: function() {
                            this.page.identifier = 2525;
                            this.page.url = window.location.href;
                        }
                    });
                }
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'jeffersonmourasblog'; // required: replace example with your forum shortname
                var disqus_title = "Pegando Informações de Eventos com Node.JS";
                var disqus_identifier = 123;
                var disqus_url = window.location.href;

                function disqus_config() {
                    this.callbacks.onReady = [function() {
                        data.refresh();
                    }];
                    this.callbacks.onNewComment = [function() {
                        data.refresh();
                    }]
                }

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script');
                    dsq.type = 'text/javascript';
                    dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </article>
        </section>
    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script>
    <script>
    hljs.initHighlightingOnLoad();
    </script>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
    <script src="/assets/script.js"></script>
</body>

</html>
